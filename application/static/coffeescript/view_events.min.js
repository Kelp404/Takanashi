(function(){var d,e,f,g,h,k;f=function(){function a(){this.show_modal_for_add_application();this.update_application();this.delete_application();this.invite_user();this.delete_viewer()}a.prototype.show_modal_for_add_application=function(){$(document).on("keypress","input.appended_input_application",function(b){if(13===b.keyCode)return $(this).parent().find("a").click(),!1});return $(document).on("shown","#form_add_application",function(){$("#name").val($(".appended_input_application").val());return $("#name").focus()})};
a.prototype.update_application=function(){return $(document).on("submit","form.form_application",function(){if(!core.validation($(this).find(".modal-body")))return!1;$.ajax({type:"put",url:$(this).attr("action"),dataType:"json",cache:!1,data:$(this).serialize(),beforeSend:function(){return core.loading_on(core.text_loading)},error:function(b){var a;core.loading_off();return 400===(a=b.status)||417===a?$.av.pop({title:"Error",message:"Please check again.",template:"error"}):core.error_message()},success:function(){core.loading_off();
return core.miko({href:location.href},!1)}});$($(this).closest(".modal")).modal("hide");return!1})};a.prototype.delete_application=function(){return $(document).on("click","a.delete_application",function(){$.ajax({type:"delete",url:$(this).attr("href"),dataType:"json",cache:!1,data:{id:$(this).attr("document_id")},beforeSend:function(){return core.loading_on(core.text_loading)},error:function(b){var a;core.loading_off();return 400===(a=b.status)||417===a?$.av.pop({title:"Error",message:"Please check again.",
template:"error"}):core.error_message()},success:function(){core.loading_off();return core.miko({href:location.href},!1)}});$($(this).closest(".modal")).modal("hide");return!1})};a.prototype.invite_user=function(){$(document).on("click","a.invite",function(){var a,c;if(!core.validation($(this).closest(".input-append")))return!1;a=$(this).closest("form");c=$(this).closest(".input-append").find("input[type=text]");$.ajax({type:"post",url:$(this).attr("href"),dataType:"json",cache:!1,data:{email:c.val()},
beforeSend:function(){return core.loading_on(core.text_loading)},error:function(a){var b;core.loading_off();return 400===(b=a.status)||403===b||417===b?c.closest(".control-group").addClass("error"):core.error_message()},success:function(){core.loading_off();a.modal("hide");$.av.pop({title:"Successful!",message:c.val()+" will get a invited email."});return core.miko({href:location.href},!1)}});return!1});return $(document).on("keypress","input.invite",function(a){if(13===a.keyCode)return $("a.invite").click(),
!1})};a.prototype.delete_viewer=function(){return $(document).on("click","a.delete_viewer",function(){var a;a=$(this).closest("div");$.ajax({type:"delete",url:$(this).attr("href"),dataType:"json",cache:!1,beforeSend:function(){return core.loading_on(core.text_loading)},error:function(){core.loading_off();return core.error_message()},success:function(c){core.loading_off();if(c.success)return a.remove()}});return!1})};return a}();h=function(){function a(){this.change_nav()}a.prototype.change_nav=function(){return $(document).on("click",
".change_nav",function(){var a;a=$(this).attr("application_id");$('#nav_bar a[href^="/crash_groups"]').attr("href","/crash_groups/"+a);$('#nav_bar a[href^="/exception_groups"]').attr("href","/exception_groups/"+a);$('#nav_bar a[href^="/log_groups"]').attr("href","/log_groups/"+a)})};return a}();k=function(){function a(){this.delete_user()}a.prototype.delete_user=function(){return $(document).on("click","a.delete_user",function(){if(!core.validation($(this)))return!1;$.ajax({type:"delete",url:$(this).attr("href"),
dataType:"json",cache:!1,beforeSend:function(){return core.loading_on(core.text_loading)},error:function(){core.loading_off();return core.error_message()},success:function(a){return a.success?core.miko({href:location.href},!1):$.av.pop({title:"Error",message:"Please check again.",template:"error"})}});return!1})};return a}();e=function(){function a(){this.update_profile()}a.prototype.update_profile=function(){return $(document).on("submit","form#form_profile",function(){if(!core.validation($(this)))return!1;
$.ajax({type:"put",url:$(this).attr("action"),dataType:"json",cache:!1,data:$(this).serialize(),beforeSend:function(){return core.loading_on(core.text_loading)},error:function(){core.loading_off();return core.error_message()},success:function(a){core.loading_off();return a.success?($.av.pop({title:"Successful!",message:"Data had be Saved.",mode:"alert"}),$("#name").val(a.name),$($("#js_navigation .cs_profile p")[0]).text(a.name)):$.av.pop({title:"Error",message:"Please check again.",template:"error"})}});
return!1})};return a}();g=function(){function a(){this.click_document_group()}a.prototype.click_document_group=function(){return $(document).on("click","tr.document_group",function(){core.miko({href:$(this).attr("href")},!0);return!1})};return a}();d=function(){return function(){new f;new h;new k;new e;new g}}();$(function(){core.setup();new d;return core.after_page_loaded()})}).call(this);
