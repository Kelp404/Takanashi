// Generated by CoffeeScript 1.6.3
(function() {
  var s;

  s = angular.module('victory.setup', []);

  s.directive('vTooltip', function() {
    /*
    setup tooltip
    */

    return function(scope, element, attrs) {
      if (attrs.vTooltip) {
        $(element).attr('title', scope.$eval(attrs.vTooltip));
      }
      return $(element).tooltip();
    };
  });

  s.directive('vFocus', function() {
    /*
    setup focus
    */

    return function(scope, element, attrs) {
      return $(element).select();
    };
  });

  s.directive('vModal', function() {
    /*
    setup modal show
    */

    return function(scope, element, attrs) {
      return $(element).on('shown', function() {
        return $(this).find('input:first').select();
      });
    };
  });

  s.directive('vEnter', function() {
    /*
    setup key enter derective
    */

    return function(scope, element, attrs) {
      return element.bind("keydown keypress", function(event) {
        if (event.which === 13) {
          scope.$apply(function() {
            return scope.$eval(attrs.vEnter);
          });
          return event.preventDefault();
        }
      });
    };
  });

  s.directive('vNavigation', function() {
    /*
    setup navigation
    */

    return function(scope, element, attrs) {
      var $selected, index, match, noop;
      if ($(element).find('li.select').length > 0) {
        $selected = $(element).find('li.select');
      } else {
        match = location.href.match(/\w\/([/#\w]*)/);
        index = match[1] === '' ? 0 : $(element).find('li a[href*="' + match[1] + '"]').parent().index();
        $selected = $(element).find('li').eq(index);
      }
      $(element).find('li:first').parent().prepend($('<li class="cs_top"></li>'));
      $(element).find('li.cs_top').css({
        width: $selected.css('width'),
        left: $selected.position().left,
        top: $selected.position().top
      });
      noop = function() {};
      $(element).find('li[class!=cs_top]').hover(function() {
        return $(element).find('li.cs_top').each(function() {
          return $(this).dequeue();
        }).animate({
          width: this.offsetWidth,
          left: this.offsetLeft
        }, 420, "easeInOutCubic");
      }, noop());
      $(element).hover(noop(), function() {
        return $(element).find('li.cs_top').each(function() {
          return $(this).dequeue();
        }).animate({
          width: $(element).find('li.select').css('width'),
          left: $(element).find('li.select').position().left
        }, 420, "easeInOutCubic");
      });
    };
  });

}).call(this);
