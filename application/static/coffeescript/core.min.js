(function(){var b,d;b={text_loading:"Loading...",is_ie:!1,is_safari:!1,setup:function(){this.setup_nav();this.setup_link();this.setup_enter_submit();return window.onpopstate=function(a){return b.pop_state(a.state)}},pop_state:function(a){a&&($(".modal.in").modal("hide"),a.is_pop=!0,this.miko(a,!1))},miko:function(a,e){var f;f=$("#js_navigation li.active").index();null==a.method&&(a.method="get");"get"!==a.method&&(e=!1);$.ajax({url:a.href,type:a.method,cache:!1,data:a.data,async:!(b.is_safari&&a.is_pop),
beforeSend:function(e){var g;g="/"===a.href?0:$('#js_navigation li a[href*="'+a.href+'"]').parent().index();b.nav_select(g);e.setRequestHeader("X-ajax","ajax");return b.loading_on(b.text_loading)},error:function(){b.loading_off();b.error_message();return b.nav_select(f)},success:function(c){b.loading_off();if(e){if(a.href!==location.pathname||0<=location.href.indexOf("?"))a.nav_select_index=$("#js_navigation li.active").index(),history.pushState(a,document.title,a.href);$("html, body").animate({scrollTop:0},
500,"easeOutExpo")}if(c.match(/<!ajax>/))return c=c.replace(/<!ajax>/,""),c=$('<div id="js_root">'+c+"</div>"),document.title=c.find("title").text(),window.cc=c,c.find(".js_ajax").each(function(){var a;a=$(this).attr("data-ajax-target");$("#"+a).html($(this).find("#"+a).html());return $("#"+a).attr("class",$(this).find("#"+a).attr("class"))}),b.after_page_loaded();location.reload()}});return!1},error_message:function(){return $.av.pop({title:"Error",message:"Loading failed, please try again later.",
template:"error"})},validation:function(a){var b;b=!0;a.find("input, textarea").each(function(){var a;if((a=$(this).attr("validation"))&&0<a.length){if($(this).val().match(a))return $(this).closest(".control-group").removeClass("error"),$(this).parent().find(".error_msg").remove();$(this).closest(".control-group").addClass("error");$(this).parent().find(".error_msg").remove();$(this).attr("msg")&&$(this).parent().append($('<label for="'+$(this).attr("id")+'" class="error_msg help-inline">'+$(this).attr("msg")+
"</label>"));return b=!1}});return b},loading_on:function(a){$("body, a, .table-pointer tbody tr").css({cursor:"wait"});if(!b.is_ie)if(0<$("#loading").length)$("#loading .message").html(a);else return a=$('<div id="loading"><div class="spin"></div><div class="message">'+a+'</div><div class="clear"></div></div>'),$("body").append(a),a=$("#loading").height(),$("#loading").css({bottom:-a}),$("#loading").animate({bottom:"+="+(a+10)},400,"easeOutExpo"),Spinner({color:"#444",width:2,length:4,radius:4}).spin($("#loading .spin")[0])},
loading_off:function(){var a;$("body").css({cursor:"default"});$("a, .table-pointer tbody tr").css({cursor:"pointer"});if(!b.is_ie)return $("#loading").dequeue(),a=$("#loading").height()+10,$("#loading").animate({bottom:"-="+a},400,"easeInExpo",function(){return $(this).remove()})},nav_select:function(a,b){null==b&&(b=!0);if(0<a&&!$($("#js_navigation li")[a]).hasClass("select"))return $("#js_navigation li").removeClass("select"),$($("#js_navigation li")[a]).addClass("select"),b?$($("#js_navigation li")[a]).mouseover():
$("#js_navigation li.cs_top").each(function(){return $(this).dequeue()}).animate({width:$("#js_navigation li.select").css("width"),left:$("#js_navigation li.select").position().left},0)},setup_nav:function(){var a;if(a=location.href.match(/\w(\/\w*)/))a="/"===a[1]?0:$('#js_navigation li a[href*="'+a[1]+'"]').parent().index(),$("#js_navigation li").removeClass("select"),$($("#js_navigation li")[a]).addClass("select");$("#js_navigation li.select").parent().prepend($('<li class="cs_top"></li>'));$("#js_navigation li.cs_top").css({width:$("#js_navigation li.select").css("width"),
left:$("#js_navigation li.select").position().left,top:$("#js_navigation li.select").position().top});a=function(){};$("#js_navigation li[class!=cs_top]").hover(function(){return $("#js_navigation li.cs_top").each(function(){return $(this).dequeue()}).animate({width:this.offsetWidth,left:this.offsetLeft},420,"easeInOutCubic")},a());return $("#js_navigation").hover(a(),function(){return $("#js_navigation li.cs_top").each(function(){return $(this).dequeue()}).animate({width:$("#js_navigation li.select").css("width"),
left:$("#js_navigation li.select").position().left},420,"easeInOutCubic")})},setup_link:function(){if(!this.is_ie)return $(document).on("click",'a:not([href*="#"])',function(a){if(!a.metaKey&&(a=$(this).attr("href"))&&!$(this).attr("target"))return b.miko({href:a},!0),!1}),$(document).on("submit",'form[method=get]:not([action*="#"])',function(){var a;a=$(this).attr("action")+"?"+$(this).serialize();b.miko({href:a},!0);$(".modal.in").modal("hide");return!1}),$(document).on("submit",'form[method=post]:not([action*="#"])',
function(){var a;b.validation($(this))&&(a=$(this).attr("action"),b.miko({href:a,data:$(this).serialize(),method:"post"}),$(".modal.in").modal("hide"));return!1})},setup_enter_submit:function(){return $(document).on("keypress",".enter-submit",function(a){if(13===a.keyCode&&a.ctrlKey)return $(this).closest("form").submit(),!1})},after_page_loaded:function(){b.setup_datetime();b.setup_focus();return b.setup_tooltip()},setup_datetime:function(){return $(".datetime").each(function(){var a;try{return a=
new Date($(this).attr("datetime")),$(this).html(a.toFormat($(this).attr("format")))}catch(b){}})},setup_focus:function(){return $(".focus").select()},setup_tooltip:function(){return $('[rel="tooltip"]').tooltip()}};window.core=b;d=navigator.userAgent.toLowerCase();b.is_ie=-1!==d.indexOf("msie");b.is_safari=-1!==d.indexOf("safari")&&-1===d.indexOf("chrome")}).call(this);
